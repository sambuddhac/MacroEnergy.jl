<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input Data ¬∑ Macro</title><meta name="title" content="Input Data ¬∑ Macro"/><meta property="og:title" content="Input Data ¬∑ Macro"/><meta property="twitter:title" content="Input Data ¬∑ Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/User Guide/2_input_data.html"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/User Guide/2_input_data.html"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/User Guide/2_input_data.html"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../index.html">Introduction</a></li><li><a class="tocitem" href="../table_of_contents.html">Table of contents</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Getting Started/1_overview.html">Overview</a></li><li><a class="tocitem" href="../Getting Started/2_installation.html">Installation</a></li><li><a class="tocitem" href="../Getting Started/3_first_run.html">First Run</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Tutorials/0_getting_started.html">Getting Started</a></li><li><a class="tocitem" href="../Tutorials/1_running_macro.html">Running Macro</a></li><li><a class="tocitem" href="../Tutorials/2_multisector_modelling.html">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="1_sectors.html">Sectors</a></li><li class="is-active"><a class="tocitem" href="2_input_data.html">Input Data</a><ul class="internal"><li><a class="tocitem" href="#Settings-folder"><span>Settings folder</span></a></li><li><a class="tocitem" href="#System-folder"><span>System folder</span></a></li><li><a class="tocitem" href="#Assets-folder"><span>Assets folder</span></a></li><li><a class="tocitem" href="#system_data.json"><span><code>system_data.json</code></span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Assets</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="assets/1_introduction.html">Macro Asset Library</a></li><li><a class="tocitem" href="assets/battery.html">Battery</a></li><li><a class="tocitem" href="assets/beccselectricity.html">BECCS Electricity</a></li><li><a class="tocitem" href="assets/beccshydrogen.html">BECCS Hydrogen</a></li><li><a class="tocitem" href="assets/electricdac.html">Electric DAC</a></li><li><a class="tocitem" href="assets/electrolyzer.html">Electrolyzer</a></li><li><a class="tocitem" href="assets/fuelcell.html">Fuel Cell</a></li><li><a class="tocitem" href="assets/gasstorage.html">Gas Storage</a></li><li><a class="tocitem" href="assets/hydrogenline.html">Hydrogen Line</a></li><li><a class="tocitem" href="assets/hydropower.html">Hydro Reservoir</a></li><li><a class="tocitem" href="assets/mustrun.html">Must Run</a></li><li><a class="tocitem" href="assets/natgasdaq.html">Natural Gas DAC</a></li><li><a class="tocitem" href="assets/powerline.html">Power Line</a></li><li><a class="tocitem" href="assets/thermalhydrogen.html">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="assets/thermalpower.html">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="assets/vre.html">Variable Renewable Energy resources (VRE)</a></li></ul></li><li><a class="tocitem" href="4_constraints.html">Constraints</a></li><li><a class="tocitem" href="5_output.html">Output</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Modeler Guide/1_introduction.html">Overview</a></li><li><a class="tocitem" href="../Modeler Guide/2_build_sectors.html">How to build a sector</a></li><li><a class="tocitem" href="../Modeler Guide/3_create_example_case.html">How to create an example case</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Developer Guide/1_introduction.html">Overview</a></li><li><a class="tocitem" href="../Developer Guide/2_type_hierarchy.html">Type hierarchy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../References/1_macro_objects.html">Macro Objects</a></li><li><a class="tocitem" href="../References/2_assets.html">Asset Library</a></li><li><a class="tocitem" href="../References/3_reading_input.html">Reading input data</a></li><li><a class="tocitem" href="../References/4_writing_output.html">Writing output data</a></li><li><a class="tocitem" href="../References/5_utilities.html">Utilities</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href="2_input_data.html">Input Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="2_input_data.html">Input Data</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/Macro" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/Macro/blob/main/docs/src/User Guide/2_input_data.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Macro-Input-Data"><a class="docs-heading-anchor" href="#Macro-Input-Data">Macro Input Data</a><a id="Macro-Input-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Macro-Input-Data" title="Permalink"></a></h1><p><em>Macro version 0.1.0</em></p><p>Macro input files are organized into <strong>three</strong> main directories:</p><ul><li><strong><a href="2_input_data.html#Settings-folder">Settings folder</a></strong>: Contains all the settings for the run and the solver.</li><li><strong><a href="2_input_data.html#System-folder">System folder</a></strong>: Contains all files related to the system, such as sectors, time resolution, nodes, demand, etc.</li><li><strong><a href="2_input_data.html#Assets-folder">Assets folder</a></strong>: Contains all the files that define the assets, such as transmission lines, power plants, storage units, etc.</li></ul><p>In addition to these folders, the user should provide a <a href="2_input_data.html#system_data.json"><code>system_data.json</code></a> file that contains the paths to the input folders and files. </p><p>As a result, the folder structure for a Macro case should be as follows:</p><pre><code class="nohighlight hljs">MacroCase
‚îÇ 
‚îú‚îÄ‚îÄ üìÅ settings
‚îÇ   ‚îî‚îÄ‚îÄ macro_settings.yml      
‚îÇ 
‚îú‚îÄ‚îÄ üìÅ system
‚îÇ   ‚îú‚îÄ‚îÄ commodities.json 
‚îÇ   ‚îú‚îÄ‚îÄ time_data.json
‚îÇ   ‚îú‚îÄ‚îÄ nodes.json
‚îÇ   ‚îú‚îÄ‚îÄ demand.csv
‚îÇ   ‚îî‚îÄ‚îÄ fuel_prices.csv
‚îÇ 
‚îú‚îÄ‚îÄ üìÅ assets
‚îÇ   ‚îú‚îÄ‚îÄbattery.json
‚îÇ   ‚îú‚îÄ‚îÄelectrolyzers.json
‚îÇ   ‚îú‚îÄ‚îÄfuel_prices.csv
‚îÇ   ‚îú‚îÄ‚îÄfuelcell.json
‚îÇ   ‚îú‚îÄ‚îÄh2storage.json
‚îÇ   ‚îú‚îÄ‚îÄpower_lines.json
‚îÇ   ‚îú‚îÄ‚îÄthermal_h2.json
‚îÇ   ‚îú‚îÄ‚îÄthermal_power.json
‚îÇ   ‚îú‚îÄ‚îÄvre.json
| [...other asset types...]
‚îÇ   ‚îî‚îÄ‚îÄavailability.csv
‚îÇ 
‚îî‚îÄ‚îÄ system_data.json</code></pre><div class="admonition is-info"><header class="admonition-header">Units in Macro</header><div class="admonition-body"><p>Macro is agnostic to the units of the input data. Special attention should be paid to the units of the transformation parameters (e.g., conversion efficiency, fuel-to-energy production, etc.). It is the user&#39;s responsibility to ensure that the units are consistent across the system input data.</p><p>The following table shows the <strong>default units</strong> of the input data that are used, for instance, in the example system provided with the package:</p><table><tr><th style="text-align: center"><strong>Sector/Quantity</strong></th><th style="text-align: center"><strong>Units</strong></th></tr><tr><td style="text-align: center"><strong>Electricity</strong></td><td style="text-align: center">MWh</td></tr><tr><td style="text-align: center"><strong>Hydrogen</strong></td><td style="text-align: center">MWh</td></tr><tr><td style="text-align: center"><strong>NaturalGas</strong></td><td style="text-align: center">MWh</td></tr><tr><td style="text-align: center"><strong>Uranium</strong></td><td style="text-align: center">MWh</td></tr><tr><td style="text-align: center"><strong>Coal</strong></td><td style="text-align: center">MWh</td></tr><tr><td style="text-align: center"><strong>CO2</strong></td><td style="text-align: center">ton</td></tr><tr><td style="text-align: center"><strong>CO2Captured</strong></td><td style="text-align: center">ton</td></tr><tr><td style="text-align: center"><strong>Biomass</strong></td><td style="text-align: center">ton</td></tr><tr><td style="text-align: center"><strong>Time</strong></td><td style="text-align: center">hours</td></tr><tr><td style="text-align: center"><strong>Price</strong></td><td style="text-align: center">USD</td></tr></table><p>Commodities that require only an energy representation (e.g., Hydrogen) have units of MWh. Commodities that require a physical representation (e.g., Biomass, where regional supply curve is important) have units of metric tonnes. The recommended convention is MWh on a higher heating value basis for transformations where hydrogen is involved, and tonnes on a dry basis for transformations where biomass is involved.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Comments in JSON files</header><div class="admonition-body"><p>The comments (e.g. <code>//</code>) in the JSON file examples are for illustrative purposes only. They should be removed before using these lines as input, as JSON does not support comments.</p></div></div><p>In the following section, we will go through each folder and file in detail.</p><h2 id="Settings-folder"><a class="docs-heading-anchor" href="#Settings-folder">Settings folder</a><a id="Settings-folder-1"></a><a class="docs-heading-anchor-permalink" href="#Settings-folder" title="Permalink"></a></h2><p>The <code>settings</code> folder currently contains only one file, <code>macro_settings.yml</code>, which contains the settings for the run.</p><h3 id="macro_settings.json"><a class="docs-heading-anchor" href="#macro_settings.json">macro_settings.json</a><a id="macro_settings.json-1"></a><a class="docs-heading-anchor-permalink" href="#macro_settings.json" title="Permalink"></a></h3><p><strong>Format</strong>: JSON</p><table><tr><th style="text-align: right"><strong>Attribute</strong></th><th style="text-align: center"><strong>Values</strong></th><th style="text-align: center"><strong>Default</strong></th><th style="text-align: right"><strong>Description</strong></th></tr><tr><td style="text-align: right">ConstraintScaling</td><td style="text-align: center">True, False</td><td style="text-align: center">False</td><td style="text-align: right">If true, the model will scale the optimization model constraints to make it more numerically stable.</td></tr><tr><td style="text-align: right">WriteSubcommodities</td><td style="text-align: center">True, False</td><td style="text-align: center">False</td><td style="text-align: right">If true, the model will write the subcommodities created by the user in the results.</td></tr><tr><td style="text-align: right">OverwriteResults</td><td style="text-align: center">True, False</td><td style="text-align: center">False</td><td style="text-align: right">If true, the model will overwrite the results file if it already exists.</td></tr><tr><td style="text-align: right">OutputDir</td><td style="text-align: center">String</td><td style="text-align: center">&quot;results&quot;</td><td style="text-align: right">The directory where the results will be saved.</td></tr></table><h2 id="System-folder"><a class="docs-heading-anchor" href="#System-folder">System folder</a><a id="System-folder-1"></a><a class="docs-heading-anchor-permalink" href="#System-folder" title="Permalink"></a></h2><p>The <code>system</code> folder currently contains five main files:</p><ul><li><a href="2_input_data.html#commodities.json">commodities.json</a>: Defines the sectors/commodities used in the system.</li><li><a href="2_input_data.html#time_data.json">time_data.json</a>: Defines the time resolution data for each sector.</li><li><a href="2_input_data.html#nodes.json">nodes.json</a>: Defines the nodes in the system.</li><li><a href="2_input_data.html#demand.csv">demand.csv</a>: Contains the demand data.</li><li><a href="2_input_data.html#fuel_prices.csv">fuel_prices.csv</a>: Contains the prices of fuels.</li></ul><h3 id="commodities.json"><a class="docs-heading-anchor" href="#commodities.json">commodities.json</a><a id="commodities.json-1"></a><a class="docs-heading-anchor-permalink" href="#commodities.json" title="Permalink"></a></h3><p><strong>Format</strong>: JSON</p><p>This file contains a list of sectors/commodities used in the system. The file is a list of string for each sector/commodity:</p><pre><code class="language-json hljs">{
    &quot;commodities&quot;: [
        &quot;Sector_1&quot;,
        &quot;Sector_2&quot;,
        ...
    ]
}</code></pre><p><strong>Example</strong>: Energy system with electricity, hydrogen, natural gas, CO2, uranium, and coal sectors:</p><pre><code class="language-json hljs">{
    &quot;commodities&quot;: [
        &quot;Electricity&quot;,
        &quot;Hydrogen&quot;,
        &quot;NaturalGas&quot;,
        &quot;CO2&quot;, 
        &quot;Uranium&quot;,
        &quot;Coal&quot;
    ]
}</code></pre><h3 id="time_data.json"><a class="docs-heading-anchor" href="#time_data.json">time_data.json</a><a id="time_data.json-1"></a><a class="docs-heading-anchor-permalink" href="#time_data.json" title="Permalink"></a></h3><p><strong>Format</strong>: JSON</p><p>This file contains the data related to the time resolution for each sector. The file is structured as follows:</p><pre><code class="language-json hljs">{
    &quot;PeriodLength&quot;: &lt;Integer&gt;,  // units: hours
    &quot;HoursPerTimeStep&quot;: {
        &quot;Sector_1&quot;: &lt;Integer&gt;,  // units: hours
        &quot;Sector_2&quot;: &lt;Integer&gt;,  // units: hours
        ...
    },
    &quot;HoursPerSubperiod&quot;: {
        &quot;Sector_1&quot;: &lt;Integer&gt;,
        &quot;Sector_2&quot;: &lt;Integer&gt;,
        ...
    },
    &quot;PeriodMap&quot;: {
        &quot;path&quot;: &lt;String&gt;, // relative path to the period map file
    },
    &quot;TotalHoursModeled&quot;: &lt;Integer&gt; // units: hours
}</code></pre><table><tr><th style="text-align: right"><strong>Attribute</strong></th><th style="text-align: center"><strong>Values</strong></th><th style="text-align: right"><strong>Description</strong></th></tr><tr><td style="text-align: right">PeriodLength</td><td style="text-align: center">Integer</td><td style="text-align: right">Total number of <strong>hours</strong> in the simulation.</td></tr><tr><td style="text-align: right">HoursPerTimeStep</td><td style="text-align: center">Integer</td><td style="text-align: right">Number of <strong>hours</strong> in each time step <strong>for each sector</strong>.</td></tr><tr><td style="text-align: right">HoursPerSubperiod</td><td style="text-align: center">Integer</td><td style="text-align: right">Number of <strong>hours</strong> in each subperiod <strong>for each sector</strong>.</td></tr><tr><td style="text-align: right">PeriodMap</td><td style="text-align: center">String</td><td style="text-align: right">Relative path to the period map file. For an example of the period map file, see <a href="https://github.com/macroenergy/Macro/blob/main/ExampleSystems/eastern_us_three_zones/system/Period_map.csv">Period_map.csv</a>.</td></tr><tr><td style="text-align: right">TotalHoursModeled</td><td style="text-align: center">Integer</td><td style="text-align: right">Total number of <strong>hours</strong> modeled. <strong>Note</strong>: When using representative periods, this parameter is used to compute the weight of each subperiod.</td></tr></table><div class="admonition is-info"><header class="admonition-header">Subperiods</header><div class="admonition-body"><p>Subperiods represent the time slices of the simulation used to perform time wrapping for time-coupling constraints (see, for example, <a href="../References/5_utilities.html#MacroEnergy.timestepbefore">MacroEnergy.timestepbefore</a>).</p></div></div><p><strong>Example</strong>: Energy system modeled for three weeks, with one hour per time step, and one week per subperiod:</p><pre><code class="language-json hljs">{
    &quot;PeriodLength&quot;: 504,  // 3 weeks
    &quot;HoursPerTimeStep&quot;: {
        &quot;Electricity&quot;: 1,
        &quot;Hydrogen&quot;: 1,
        &quot;NaturalGas&quot;: 1,
        &quot;CO2&quot;: 1,
        &quot;Uranium&quot;: 1,
        &quot;Coal&quot;: 1
    },
    &quot;HoursPerSubperiod&quot;: {
        &quot;Electricity&quot;: 168,  // 1 week
        &quot;Hydrogen&quot;: 168,
        &quot;NaturalGas&quot;: 168,
        &quot;CO2&quot;: 168,
        &quot;Uranium&quot;: 168,
        &quot;Coal&quot;: 168
    },
    &quot;PeriodMap&quot;: {
        &quot;path&quot;: &quot;three_weeks/Period_map.csv&quot;
    },
    &quot;TotalHoursModeled&quot;: 8760
}</code></pre><p><code>Period_map.csv</code>:</p><pre><code class="nohighlight hljs">| Period_Index | Rep_Period | Rep_Period_Index |
|--------------|------------|------------------|
| 1            | 6          | 1                |
| 2            | 6          | 1                |
| 3            | 6          | 1                |
| 4            | 6          | 1                |
| 5            | 6          | 1                |
| 6            | 6          | 1                |
| 7            | 6          | 1                |
| 8            | 6          | 1                |
| 9            | 6          | 1                |
| 10           | 17         | 2                |
| ...          | ...        | ...              |</code></pre><p>In this example, Macro uses the above input files to create the following parameters:</p><ul><li><p><strong>Total time interval</strong>: <code>[1:PeriodLength] = [1:504]</code></p></li><li><p><strong><code>HoursPerTimeStep</code></strong>: <code>1</code> for all sectors</p></li><li><p><strong>Subperiods</strong>:</p><ol><li><code>[1:168]</code>: first week</li><li><code>[169:336]</code>: second week</li><li><code>[337:504]</code>: third week</li></ol></li><li><p><strong>Period map</strong>:    This file assigns each week of the <code>TotalHoursModeled</code> to one of the representative periods.    For instance: </p><ul><li><code>week 1</code> -&gt; <code>6th representative period</code></li><li><code>week 2</code> -&gt; <code>6th representative period</code></li><li><code>week 3</code> -&gt; <code>6th representative period</code></li><li><code>week 10</code> -&gt; <code>17th representative period</code></li><li>etc.</li></ul></li><li><p><strong>Weight of each subperiod</strong>: </p><ol><li><code>[1:168]</code> -&gt; <code>18.0495</code></li><li><code>[169:336]</code> -&gt; <code>21.0577</code></li><li><code>[337:504]</code> -&gt; <code>13.0357</code></li></ol><p>This value is used to &#39;weight&#39; each hour of the subperiods in the operational model.</p></li></ul><p>The formula used to compute the weight of each subperiod is:</p><p class="math-container">\[w_i = \alpha * n_i\]</p><p>where <span>$\alpha$</span> is a scaling factor defined as:</p><p class="math-container">\[\alpha = \frac{TotalHoursModeled}{\sum_{i=1}^{N} HoursPerSubperiod * n_i}\]</p><p>and <span>$n_i$</span> is the number of times the <span>$i$</span>-th representative period is used in the period map to model periods, and <span>$N$</span> is the total number of representative periods.</p><div class="admonition is-info"><header class="admonition-header">Weights without period map</header><div class="admonition-body"><p>If the period map is not provided, the weights are set to 1 for each representative period.</p></div></div><h3 id="nodes.json"><a class="docs-heading-anchor" href="#nodes.json">nodes.json</a><a id="nodes.json-1"></a><a class="docs-heading-anchor-permalink" href="#nodes.json" title="Permalink"></a></h3><p><strong>Format</strong>: JSON</p><p>This file defines the regions/nodes for each sector. It is structured as a list of dictionaries, where each dictionary defines a network for a given sector. </p><p>Each dictionary has three main attributes:</p><ul><li><code>type</code>: The type of the network (e.g. &quot;NaturalGas&quot;, &quot;Electricity&quot;, etc.).</li><li><code>global_data</code>: attributes that are the same for all the nodes in the network.</li><li><code>instance_data</code>: attributes that are different for each node in the network.</li></ul><p>This structure for the network has the advantage of <strong>grouping the common attributes</strong> for all the nodes in a single place, avoiding to repeat the same attribute for all the nodes.</p><p>This is the structure of the <code>nodes.json</code> file:</p><pre><code class="language-json hljs">{
    &quot;nodes&quot;: [
        {
            &quot;type&quot;: &quot;NaturalGas&quot;, // NaturalGas network
            &quot;global_data&quot;: {},    // attributes that are the same for all the nodes in the network
            &quot;instance_data&quot;: [
                // NaturalGas node 1 ...
                // NaturalGas node 2 ...
                // ...
            ]
        },
        {
            &quot;type&quot;: &quot;Electricity&quot;, // Electricity network
            &quot;global_data&quot;: {},     // attributes that are the same for all the nodes in the network
            &quot;instance_data&quot;: [
                // Electricity node 1 ...
                // Electricity node 2 ...
                // ...
            ]
        }
    ]
}</code></pre><p>The attributes that can be set for each node (either in <code>global_data</code> or <code>instance_data</code>) are the following:</p><table><tr><th style="text-align: left"><strong>Attribute</strong></th><th style="text-align: center"><strong>Type</strong></th><th style="text-align: center"><strong>Values</strong></th><th style="text-align: center"><strong>Default</strong></th><th style="text-align: left"><strong>Description</strong></th></tr><tr><td style="text-align: left"><strong>id</strong></td><td style="text-align: center"><code>String</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: center">Required</td><td style="text-align: left">Unique identifier for the node. E.g. &quot;elec_node_1&quot;.</td></tr><tr><td style="text-align: left"><strong>type</strong></td><td style="text-align: center"><code>String</code></td><td style="text-align: center">Any Macro commodity type</td><td style="text-align: center">Required</td><td style="text-align: left">Commodity type. E.g. &quot;Electricity&quot;.</td></tr><tr><td style="text-align: left"><strong>time_interval</strong></td><td style="text-align: center"><code>String</code></td><td style="text-align: center">Any Macro commodity type</td><td style="text-align: center">Required</td><td style="text-align: left">Time resolution for the time series data linked to the node. E.g. &quot;Electricity&quot;.</td></tr><tr><td style="text-align: left"><strong>constraints</strong></td><td style="text-align: center"><code>Dict{String,Bool}</code></td><td style="text-align: center">Any Macro constraint type</td><td style="text-align: center">Empty</td><td style="text-align: left">List of constraints applied to the node. E.g. <code>{&quot;BalanceConstraint&quot;: true, &quot;MaxNonServedDemandConstraint&quot;: true}</code>.</td></tr><tr><td style="text-align: left"><strong>demand</strong></td><td style="text-align: center"><code>Dict</code></td><td style="text-align: center">Demand file path and header</td><td style="text-align: center">Empty</td><td style="text-align: left">Path to the demand file and column name for the demand time series to link to the node. E.g. <code>{&quot;timeseries&quot;: {&quot;path&quot;: &quot;system/demand.csv&quot;, &quot;header&quot;: &quot;Demand_MW_z1&quot;}}</code>.</td></tr><tr><td style="text-align: left"><strong>max_nsd</strong></td><td style="text-align: center"><code>Vector{Float64}</code></td><td style="text-align: center">Vector of numbers <span>$\in$</span> [0,1]</td><td style="text-align: center">[0.0]</td><td style="text-align: left">Maximum allowed non-served demand for each demand segment as a fraction of the total demand. E.g. <code>[1.0]</code> for a single segment.</td></tr><tr><td style="text-align: left"><strong>max_supply</strong></td><td style="text-align: center"><code>Vector{Float64}</code></td><td style="text-align: center">Vector of numbers</td><td style="text-align: center">[0.0]</td><td style="text-align: left">Maximum allowed supply for each supply segment. E.g. <code>[1000.0]</code> for a single segment.</td></tr><tr><td style="text-align: left"><strong>price</strong></td><td style="text-align: center"><code>Dict</code></td><td style="text-align: center">Price file path and header</td><td style="text-align: center">Empty</td><td style="text-align: left">Path to the price file and column name for the price time series to link to the node. E.g. <code>{&quot;timeseries&quot;: {&quot;path&quot;: &quot;system/fuel_prices.csv&quot;, &quot;header&quot;: &quot;natgas_SE&quot;}}</code>.</td></tr><tr><td style="text-align: left"><strong>price_nsd</strong></td><td style="text-align: center"><code>Vector{Float64}</code></td><td style="text-align: center">Vector of numbers</td><td style="text-align: center">[0.0]</td><td style="text-align: left">Price/penalty for non-served demand by segment. E.g. <code>[5000.0]</code> for a single segment.</td></tr><tr><td style="text-align: left"><strong>price_supply</strong></td><td style="text-align: center"><code>Vector{Float64}</code></td><td style="text-align: center">Vector of numbers</td><td style="text-align: center">[0.0]</td><td style="text-align: left">Piecewise linear price for supply curves. E.g. <code>[0.0, 100.0, 200.0]</code>.</td></tr><tr><td style="text-align: left"><strong>price_unmet_policy</strong></td><td style="text-align: center"><code>Dict{DataType,Float64}</code></td><td style="text-align: center">Dict of Macro policy types and numbers</td><td style="text-align: center">Empty</td><td style="text-align: left">Price/penalty for unmet policy constraints.</td></tr><tr><td style="text-align: left"><strong>rhs_policy</strong></td><td style="text-align: center"><code>Dict{DataType,Float64}</code></td><td style="text-align: center">Dict of Macro constraint types and numbers</td><td style="text-align: center">Empty</td><td style="text-align: left">Right hand side of the policy constraints. E.g. <code>{&quot;CO2CapConstraint&quot;: 200}</code>, carbon price of 200 USD/ton.</td></tr></table><div class="admonition is-success"><header class="admonition-header">Constraints</header><div class="admonition-body"><p>One of the main features of Macro is the ability to include constraints on the system from a pre-defined library of constraints (see <a href="4_constraints.html#Macro-Constraint-Library">Macro Constraint Library</a> for more details). To include a constraint to a node, the user needs to add the constraint name to the <code>constraints</code> attribute of the node. The example below will show how to include constraints to node instances. </p></div></div><p><strong>Example</strong>: the following is an example of a <code>nodes.json</code> file with both electricity, natural gas, CO2 and biomass sectors covering most of the attributes present above. The (multiplex)-network in the system is made of the following sub-networks:</p><ul><li>NaturalGas (three nodes)<ul><li><code>natgas_SE</code></li><li><code>natgas_MIDAT</code></li><li><code>natgas_NE</code></li></ul></li><li>Electricity (three nodes)<ul><li><code>elec_SE</code></li><li><code>elec_MIDAT</code></li><li><code>elec_NE</code></li></ul></li><li>CO2 (one node)<ul><li><code>co2_sink</code></li></ul></li><li>Biomass (one node)<ul><li><code>bioherb_SE</code></li></ul></li></ul><p>Therefore, the system has 4 networks and 8 nodes in total.</p><pre><code class="language-json hljs">{
    &quot;nodes&quot;: [
        {
            &quot;type&quot;: &quot;NaturalGas&quot;,
            &quot;global_data&quot;: {
                &quot;time_interval&quot;: &quot;NaturalGas&quot; // time resolution as defined in the time_data.json file
            },
            &quot;instance_data&quot;: [
                {   // NaturalGas node 1
                    &quot;id&quot;: &quot;natgas_SE&quot;,
                    &quot;price&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/fuel_prices.csv&quot;, // path to the price file
                            &quot;header&quot;: &quot;natgas_SE&quot; // column name in the price file for the price time series
                        }
                    }
                },  // End of NaturalGas node 1
                {   // NaturalGas node 2
                    &quot;id&quot;: &quot;natgas_MIDAT&quot;,
                    &quot;price&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/fuel_prices.csv&quot;,
                            &quot;header&quot;: &quot;natgas_MIDAT&quot;
                        }
                    }
                },  // End of NaturalGas node 2
                {   // NaturalGas node 3
                    &quot;id&quot;: &quot;natgas_NE&quot;,
                    &quot;price&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/fuel_prices.csv&quot;,
                            &quot;header&quot;: &quot;natgas_NE&quot;
                        }
                    }
                },  // End of NaturalGas node 3
            ]
        },
        {
            &quot;type&quot;: &quot;Electricity&quot;,
            &quot;global_data&quot;: {
                &quot;time_interval&quot;: &quot;Electricity&quot;,
                &quot;max_nsd&quot;: [  // maximum allowed non-served demand for each demand segment as a fraction of the total demand
                    1
                ],
                &quot;price_nsd&quot;: [  // price/penalty for non-served demand by segment
                    5000.0
                ],
                &quot;constraints&quot;: {    // constraints applied to the nodes
                    &quot;BalanceConstraint&quot;: true,
                    &quot;MaxNonServedDemandConstraint&quot;: true,
                    &quot;MaxNonServedDemandPerSegmentConstraint&quot;: true
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;elec_SE&quot;,
                    &quot;demand&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/demand.csv&quot;, // path to the demand file
                            &quot;header&quot;: &quot;Demand_MW_z1&quot; // column name in the demand file for the demand time series
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;elec_MIDAT&quot;,
                    &quot;demand&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/demand.csv&quot;,
                            &quot;header&quot;: &quot;Demand_MW_z2&quot;
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;elec_NE&quot;,
                    &quot;demand&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/demand.csv&quot;,
                            &quot;header&quot;: &quot;Demand_MW_z3&quot;
                        }
                    }
                }
            ]
        },
        {
            &quot;type&quot;: &quot;CO2&quot;,
            &quot;global_data&quot;: {
                &quot;time_interval&quot;: &quot;CO2&quot;
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;co2_sink&quot;,
                    &quot;constraints&quot;: {
                        &quot;CO2CapConstraint&quot;: true
                    },
                    &quot;rhs_policy&quot;: {  // right hand side of the policy constraints
                        &quot;CO2CapConstraint&quot;: 0
                    },
                    &quot;price_unmet_policy&quot;: {  // price/penalty for unmet policy constraints
                        &quot;CO2CapConstraint&quot;: 250.0
                    }
                }
            ]
        },
        {
            &quot;type&quot;: &quot;Biomass&quot;,
            &quot;global_data&quot;: {
                &quot;time_interval&quot;: &quot;Biomass&quot;,
                &quot;constraints&quot;: {
                    &quot;BalanceConstraint&quot;: true
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;bioherb_SE&quot;,
                    &quot;demand&quot;: {
                        &quot;timeseries&quot;: {
                            &quot;path&quot;: &quot;system/demand.csv&quot;,
                            &quot;header&quot;: &quot;Demand_Zero&quot;
                        }
                    },
                    &quot;max_supply&quot;: [  // maximum allowed supply for each supply segment
                        10000,
                        20000,
                        30000
                    ],
                    &quot;price_supply&quot;: [  // piecewise linear price for supply curves
                        40,
                        60,
                        80
                    ]
                }
            ]
        }
    ]
}</code></pre><p>In this example, <code>BalanceConstraint</code>, <code>MaxNonServedDemandConstraint</code>, and <code>MaxNonServedDemandPerSegmentConstraint</code> are applied to all the nodes in the electricity network. In particular, the <code>MaxNonServedDemandConstraint</code> limits the maximum amount of demand that can be unmet in a given time step, and the <code>MaxNonServedDemandPerSegmentConstraint</code> limits the maximum amount of demand that can be unmet in each demand segment. In addition, the <code>CO2CapConstraint</code> is applied to the <span>$\text{CO}_2$</span> node to model a greenfield scenario with a carbon price of 250 USD/ton.</p><h3 id="demand.csv"><a class="docs-heading-anchor" href="#demand.csv">demand.csv</a><a id="demand.csv-1"></a><a class="docs-heading-anchor-permalink" href="#demand.csv" title="Permalink"></a></h3><p><strong>Format</strong>: CSV</p><p>This file contains the demand data for each region/node. </p><ul><li><strong>First column</strong>: Time step.</li><li><strong>Remaining columns</strong>: Demand for each region/node (units: MWh).</li></ul><h5 id="Example:"><a class="docs-heading-anchor" href="#Example:">Example:</a><a id="Example:-1"></a><a class="docs-heading-anchor-permalink" href="#Example:" title="Permalink"></a></h5><table><tr><th style="text-align: right">TimeStep</th><th style="text-align: right">Demand<em>MW</em>z1</th><th style="text-align: right">Demand<em>MW</em>z2</th><th style="text-align: right">Demand<em>MW</em>z3</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">100</td><td style="text-align: right">200</td><td style="text-align: right">300</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">110</td><td style="text-align: right">210</td><td style="text-align: right">310</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><h3 id="fuel_prices.csv"><a class="docs-heading-anchor" href="#fuel_prices.csv">fuel_prices.csv</a><a id="fuel_prices.csv-1"></a><a class="docs-heading-anchor-permalink" href="#fuel_prices.csv" title="Permalink"></a></h3><p><strong>Format</strong>: CSV</p><p>This file contains the prices for each fuel for each region/node.</p><ul><li><strong>First column</strong>: Time step.</li><li><strong>Remaining columns</strong>: Prices for each region/node (units: USD/MWh).</li></ul><h5 id="Example:-2"><a class="docs-heading-anchor" href="#Example:-2">Example:</a><a class="docs-heading-anchor-permalink" href="#Example:-2" title="Permalink"></a></h5><table><tr><th style="text-align: right">TimeStep</th><th style="text-align: right">natgas_SE</th><th style="text-align: right">natgas_MIDAT</th><th style="text-align: right">natgas_NE</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">100</td><td style="text-align: right">110</td><td style="text-align: right">120</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">110</td><td style="text-align: right">120</td><td style="text-align: right">130</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><h2 id="Assets-folder"><a class="docs-heading-anchor" href="#Assets-folder">Assets folder</a><a id="Assets-folder-1"></a><a class="docs-heading-anchor-permalink" href="#Assets-folder" title="Permalink"></a></h2><p>The <code>assets</code> folder contains all the files that define the resources and technologies that are included in the system. As a general rule, each asset type has its own file, where each file is structured in a similar way to the <code>nodes.json</code> file. </p><h3 id="Asset-files"><a class="docs-heading-anchor" href="#Asset-files">Asset files</a><a id="Asset-files-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-files" title="Permalink"></a></h3><p><strong>Format</strong>: JSON</p><p>Similar to the <code>nodes.json</code> file, each asset file has the following three main parameters:</p><ul><li><code>type</code>: The type of the asset (e.g. &quot;Battery&quot;, &quot;FuelCell&quot;, &quot;PowerLine&quot;, etc.).</li><li><code>global_data</code>: attributes that are the same for all the assets of the same type (e.g., unit commitment constraints applied to all the power plants).</li><li><code>instance_data</code>: attributes that are different for each asset of the same type (e.g., investment costs, lifetime, etc.).</li></ul><p>Depending on the graph structure of the asset, both <code>global_data</code> and <code>instance_data</code> can have different attributes, one for each transformation, edge, and storage present in the asset. </p><div class="admonition is-success"><header class="admonition-header">Example: natural gas power plant</header><div class="admonition-body"><p>For example, a natural gas combined cycle power plant is represented by an asset made of: </p><ul><li><strong>1 transformation</strong> (combustion and electricity generation)</li><li><strong>3 edges</strong> <ul><li>natural gas flow</li><li>electricity flow</li><li>CO2 flow</li></ul></li></ul><p>Then, both <code>global_data</code> and <code>instance_data</code> will have the following structure:</p><pre><code class="language-json hljs">{
    &quot;transforms&quot;:{
        // ... transformation-specific attributes ...
    },
    &quot;edges&quot;:{
        &quot;elec_edge&quot;: {
            // ... elec_edge-specific attributes ...
        },
        &quot;fuel_edge&quot;: {
            // ... fuel_edge-specific attributes ...
        },
        &quot;co2_edge&quot;: {
            // ... co2_edge-specific attributes ...
        }
    }
}</code></pre></div></div><p>In the following sections, we will go through each asset type and show the attributes that can be set for each of them. Each section will contain the following three parts:</p><ul><li><strong>Graph structure</strong>: a graphical representation of the asset, showing the transformations, edges, and storages present in the asset.</li><li><strong>Attributes</strong>: a table with the attributes that can be set for each asset type.</li><li><strong>Example</strong>: an example of the asset type file (<code>.json</code>).</li></ul><h2 id="system_data.json"><a class="docs-heading-anchor" href="#system_data.json"><code>system_data.json</code></a><a id="system_data.json-1"></a><a class="docs-heading-anchor-permalink" href="#system_data.json" title="Permalink"></a></h2><p><strong>Format</strong>: JSON</p><p>This file contains the paths to the input folders and files, and is structured as follows:</p><pre><code class="language-json hljs">{
    &quot;commodities&quot;: {
        &quot;path&quot;: &quot;system/commodities.json&quot;
    },
    &quot;locations&quot;: {
        &quot;path&quot;: &quot;locations&quot;
    },
    &quot;settings&quot;: {
        &quot;path&quot;: &quot;settings/macro_settings.json&quot;
    },
    &quot;assets&quot;: {
        &quot;path&quot;: &quot;assets&quot;
    },
    &quot;time_data&quot;: {
        &quot;path&quot;: &quot;system/time_data.json&quot;
    },
    &quot;nodes&quot;: {
        &quot;path&quot;: &quot;system/nodes.json&quot;
    }
}</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="1_sectors.html">¬´ Sectors</a><a class="docs-footer-nextpage" href="assets/1_introduction.html">Macro Asset Library ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Tuesday 11 March 2025 21:02">Tuesday 11 March 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
